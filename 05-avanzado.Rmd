# Opciones avanzadas y otras aplicaciones
```{r, include=FALSE}
alice <- read.table('alice_in_wonderland.txt', quote = '', sep='\t', stringsAsFactors = FALSE, encoding = 'UTF-8')
```

Existen otras muchas posibilidades con las expresiones regulares, de entre ellas vamos a destacar algunas de las más relevantes. Por ello, en esta ocasión los datos sobre los que se van a aplicar son diferentes, usando ahora la novela *Alice's Adventures in Wonderland*.

## Lookarounds

De manera más avanzada, existe la opción de marcar elementos situados delante o detrás de un determinado caracter o cadena de caracateres o, a la inversa, localizar lo que no está precedido o seguido de ello. Una de sus utilidades está en realizar operaciones de extracción o reemplazo muy especificas que de otro modo no serían posibles o más complejas.

### (?=)

Para localizar un elemento que precede a una expresion regular se puede usar el denominado `positive lookahead` con `(?=)`. Por ejemplo, con `'.*'(?=\ssaid Alice)` podemos seleccionar las frases que dice Alice y por medio de `str_extract()` extraer dichas frases.

```{r, echo=FALSE}
head(stringr::str_extract(alice[grepl("'.*'(?=\\ssaid Alice)",alice$V1, perl=TRUE),],stringr::regex("'.*'(?=\\ssaid Alice)")))
```

### (?!)

Existe una versión negativa denominada `negative lookahead`, con la que es posible localizar elementos que no vengan seguidos de un determinado patrón. Por ejemplo, con `'.*'(?!\ssaid\sAlice)` el resultado sería justamente el opuesto, recuperando así todas las citas de personajes que no sean Alice.

```{r, echo=FALSE}
head(stringr::str_extract(alice[grepl("'.*'(?!\\ssaid\\sAlice)",alice$V1, perl=TRUE),],stringr::regex("'.*'(?!\\ssaid\\sAlice)")))
```

### (?<=)

Junto a esta opción esta la de localizar un caracter o cadena que 

```{r, echo=FALSE}
head(stringr::str_extract(alice[grepl('(?<=\\ssaid\\s)the\\s\\w+',alice$V1,  perl=TRUE),],stringr::regex('(?<=\\ssaid\\s)the\\s\\w+')))
```

### (?<!)

Junto a esta opción esta la de localizar un caracter o cadena que 

```{r, echo=FALSE}
head(stringr::str_extract(alice[grepl('(?<=\\ssaid\\s)the\\s\\w+',alice$V1,  perl=TRUE),],stringr::regex('(?<=\\ssaid\\s)the\\s\\w+')))
```
